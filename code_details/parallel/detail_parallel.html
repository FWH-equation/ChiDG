

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Parallelization &mdash; ChiDG 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  

  
    <link rel="top" title="ChiDG 0.1 documentation" href="../../index.html"/>
        <link rel="up" title="Code details" href="../details_main.html"/>
        <link rel="next" title="Automatic Differentiation" href="../autodiff/detail_autodiff.html"/>
        <link rel="prev" title="ChiDG Matrix/Vector" href="../containers/detail_containers.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> ChiDG
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/getting_started.html#build-from-source">Build from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-1-get-chidg">Step 1: Get ChiDG</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-2-check-the-compilers">Step 2: Check the compilers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-3-install-the-dependencies">Step 3: Install the dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/getting_started.html#cmake">CMake</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/getting_started.html#hdf5">HDF5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/getting_started.html#metis">METIS</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/getting_started.html#mpi">MPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting_started/getting_started.html#blas-and-lapack">BLAS and LAPACK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-4-configure-the-build">Step 4: Configure the build</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-5-build-chidg">Step 5: Build ChiDG</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-6-test-chidg">Step 6: Test ChiDG</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/getting_started.html#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#chidg-executable-chidg">ChiDG Executable: <code class="docutils literal"><span class="pre">chidg</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting_started/getting_started.html#running-chidg">Running ChiDG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-1-create-a-chidg-formatted-grid-file">Step 1: Create a ChiDG-formatted grid file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-2-create-a-chidg-nml-input-file">Step 2: Create a <code class="docutils literal"><span class="pre">chidg.nml</span></code> input file</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting_started/getting_started.html#step-3-run-chidg">Step 3: Run <code class="docutils literal"><span class="pre">chidg</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../details_main.html">Code details</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../chidg/detail_chidg.html">ChiDG API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/detail_architecture.html">Finding your way around ChiDG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../architecture/detail_architecture.html#source-layout-chidg-src">Source Layout <code class="docutils literal"><span class="pre">chidg/src</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../architecture/detail_architecture.html#chidg-modules">ChiDG Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../architecture/detail_architecture.html#chidg-datatypes-type-datatype-f90">ChiDG Datatypes <code class="docutils literal"><span class="pre">type_datatype.f90</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../architecture/detail_architecture.html#chidg-topics-src-topic">ChiDG Topics <code class="docutils literal"><span class="pre">src/topic</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../mesh/detail_mesh.html">Mesh</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../mesh/detail_mesh.html#coordinate-systems">Coordinate Systems</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mesh/detail_mesh.html#id1">Mesh</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../mesh/detail_mesh.html#elements">Elements</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mesh/detail_mesh.html#faces">Faces</a></li>
<li class="toctree-l4"><a class="reference internal" href="../mesh/detail_mesh.html#chimera-interfaces">Chimera Interfaces</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../equations/detail_equations.html">Equation Sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../equations/detail_equations_theory.html">Theory + Abstractions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_theory.html#mathematical-background">Mathematical background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_theory.html#chidg-operators">ChiDG Operators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_theory.html#chidg-equation-sets">ChiDG Equation Sets</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../equations/detail_equations_fluid.html">Fluid Equations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_fluid.html#fluid-advection">Fluid Advection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_fluid.html#fluid-diffusion">Fluid Diffusion</a></li>
<li class="toctree-l4"><a class="reference internal" href="../equations/detail_equations_fluid.html#models">Models</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../boundary_conditions/detail_boundary_conditions.html">Boundary conditions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../boundary_conditions/detail_bc_theory.html">Theory + Abstractions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_theory.html#boundary-condition-patch">Boundary condition patch</a></li>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_theory.html#boundary-condition-state-functions">Boundary condition state functions</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html">Fluid boundary conditions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html#inlet-total">Inlet - Total</a></li>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html#outlet-constant-pressure">Outlet - Constant Pressure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html#wall">Wall</a></li>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html#symmetry">Symmetry</a></li>
<li class="toctree-l4"><a class="reference internal" href="../boundary_conditions/detail_bc_fluid.html#farfield">Farfield</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../boundary_conditions/detail_bc_periodic.html">Periodic boundary condition</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../solvers/detail_solvers.html">Solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../solvers/detail_solvers.html#time-integrators">Time Integrators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#chidg-representation">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#implicit-integrators">Implicit integrators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#explicit-integrators">Explicit integrators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../solvers/detail_solvers.html#nonlinear-solvers">Nonlinear solvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#id1">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#newton">Newton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#quasi-newton">Quasi-Newton</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../solvers/detail_solvers.html#linear-solvers">Linear Solvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#id2">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#flexible-generalized-minimum-residual">Flexible Generalized Minimum Residual</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../solvers/detail_solvers.html#preconditioners">Preconditioners</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#id4">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#block-jacobi">block-Jacobi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#block-ilu0">block-ILU0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../solvers/detail_solvers.html#restricted-additive-schwarz-block-ilu0">Restricted Additive Schwarz + block-ILU0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../containers/detail_containers.html">ChiDG Matrix/Vector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../containers/detail_containers.html#chidg-vector">ChiDG Vector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../containers/detail_containers.html#block-vector">Block Vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../containers/detail_containers.html#dense-vector">Dense Vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../containers/detail_containers.html#chidg-matrix">ChiDG Matrix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../containers/detail_containers.html#block-matrix">Block Matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../containers/detail_containers.html#dense-matrix">Dense Matrix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Parallelization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#chidg-mpi">ChiDG MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#domain-decomposition">Domain decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-matrix-vector-operations">Parallel matrix:vector operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#chidg-matrix">chidg_matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#chidg-vector">chidg_vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-efficiency">Parallel efficiency</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parallel-preconditioning">Parallel preconditioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#block-jacobi">Block-Jacobi</a></li>
<li class="toctree-l4"><a class="reference internal" href="#restricted-additive-schwarz">Restricted Additive Schwarz</a></li>
<li class="toctree-l4"><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../autodiff/detail_autodiff.html">Automatic Differentiation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../autodiff/detail_autodiff.html#dnad-dual-number-automatic-differentiation">DNAD - Dual Number Automatic Differentiation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../examples/example_main.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html">Smooth bump</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html#setup-from-scratch">Setup from scratch:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html#use-setup-provided">Use setup provided:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/smoothbump/example_smoothbump.html#results">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../examples/naca2412/example_naca2412.html">NACA 2412 Airfoil</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../examples/naca2412/example_naca2412.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/naca2412/example_naca2412.html#set-up">Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../examples/naca2412/example_naca2412.html#results">Results</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">ChiDG</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../details_main.html">Code details</a> &raquo;</li>
      
    <li>Parallelization</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/code_details/parallel/detail_parallel.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="parallelization">
<h1>Parallelization<a class="headerlink" href="#parallelization" title="Permalink to this headline">¶</a></h1>
<div class="section" id="chidg-mpi">
<h2>ChiDG MPI<a class="headerlink" href="#chidg-mpi" title="Permalink to this headline">¶</a></h2>
<p>ChiDG uses a module named <code class="docutils literal"><span class="pre">mod_chidg_mpi</span></code> to hold information regarding the parallel
environment available to ChiDG. This includes values for the number of MPI ranks given to
ChiDG, the rank of the current process, and a communicator(<code class="docutils literal"><span class="pre">ChiDG_COMM</span></code>) containing
the processes that ChiDG is running on. These are:</p>
<div class="highlight-Fortran"><div class="highlight"><pre><span></span><span class="k">module </span><span class="n">mod_chidg_mpi</span>

    <span class="kt">integer</span><span class="p">(</span><span class="n">ik</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">IRANK</span>
    <span class="kt">integer</span><span class="p">(</span><span class="n">ik</span><span class="p">)</span>    <span class="kd">::</span> <span class="n">NRANK</span>
    <span class="k">type</span><span class="p">(</span><span class="n">mpi_comm</span><span class="p">)</span> <span class="kd">::</span> <span class="n">ChiDG_COMM</span>
    <span class="p">...</span>

<span class="k">end module</span>
</pre></div>
</div>
<p>One instance where having a defined communicator for ChiDG is helpful is in unit-testing.
We may want to test a routine using 1, 2, and 3 MPI ranks. So, we may write a test and run
it with 3 MPI ranks so MPI_COMM_WORLD includes all of those. However, we only want ChiDG
to run on subsets of those to test different numbers of processors. So, we can define a
communicator that informs ChiDG what processors it owns and should be talking to.</p>
</div>
<div class="section" id="domain-decomposition">
<h2>Domain decomposition<a class="headerlink" href="#domain-decomposition" title="Permalink to this headline">¶</a></h2>
<p>A domain-decomposition approach is used to facilitate the parallel execution of ChiDG.
The Metis library is used to return a partitioning of the original global problem. The
number of partitions is equal to the number of processors in the <code class="docutils literal"><span class="pre">ChiDG_COMM</span></code> communicator.</p>
<p>ChiDG uses linear element indices to identify elements. In a parallel context each element
has two indices; a global index, and a local index. A global element index corresponds to
the index of the element in its unpartitioned domain. A local element index is the index
of an element in a processor-local partition of a domain. An element&#8217;s global index never
changes. However, a local index depends on the partitioning of the original domain.
This is shown here for a domain before and after partitioning for two processors</p>
<div class="align-center figure align-left" id="id1">
<a class="reference internal image-reference" href="../../_images/global_indices.png"><img alt="../../_images/global_indices.png" src="../../_images/global_indices.png" style="width: 225pt;" /></a>
<p class="caption"><span class="caption-text"><strong>Global element indices</strong></span></p>
</div>
<div class="align-center figure align-right" id="id2">
<a class="reference internal image-reference" href="../../_images/local_indices_new.png"><img alt="../../_images/local_indices_new.png" src="../../_images/local_indices_new.png" style="width: 270pt;" /></a>
<p class="caption"><span class="caption-text"><strong>Local element indices</strong></span></p>
</div>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="parallel-matrix-vector-operations">
<h2>Parallel matrix:vector operations<a class="headerlink" href="#parallel-matrix-vector-operations" title="Permalink to this headline">¶</a></h2>
<p>ChiDG has matrix and vector data-types defined that represent the global
problem. They also know how to communicate globally between processors to
compute operations that are apart of many algorithms for solving linear
systems of equations.</p>
<div class="section" id="chidg-matrix">
<h3>chidg_matrix<a class="headerlink" href="#chidg-matrix" title="Permalink to this headline">¶</a></h3>
<p>The global <code class="docutils literal"><span class="pre">chidg_matrix</span></code> uses a 1D Row-wise parallel distribution[1]. In this way, each
processor owns an entire Row of the global matrix. The <code class="docutils literal"><span class="pre">chidg_vector</span></code>
located on a given processor corresponds to the row in the <code class="docutils literal"><span class="pre">chidg_matrix</span></code>, as shown here</p>
<a class="reference internal image-reference" href="../../_images/chidg_matrix_partition.png"><img alt="../../_images/chidg_matrix_partition.png" class="align-center" src="../../_images/chidg_matrix_partition.png" style="width: 30%;" /></a>
<dl class="function">
<dt id="mv">
<code class="descname">mv</code><span class="sig-paren">(</span><em>chidg_matrix</em>, <em>chidg_vector</em><span class="sig-paren">)</span><a class="headerlink" href="#mv" title="Permalink to this definition">¶</a></dt>
<dd><p>This computes the global matrix-vector product between a <code class="docutils literal"><span class="pre">chidg_matrix</span></code> and
<code class="docutils literal"><span class="pre">chidg_vector</span></code>. First, the <code class="docutils literal"><span class="pre">chidg_vector%comm_send()</span></code> routine is called to
initiate non-blocking sends of vector data to communicating processors.
Then the processor-local part of the matrix-vector product is performed.
<code class="docutils literal"><span class="pre">chidg_vector%comm_recv()</span></code> is then called to receive incoming vector data from
communicating processors. The non-local part of the matrix-vector product is then
performed with the newly-arrived vector data from other processors.</p>
</dd></dl>

</div>
<div class="section" id="chidg-vector">
<h3>chidg_vector<a class="headerlink" href="#chidg-vector" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt>
<code class="descname">chidg_vector%norm()</code></dt>
<dd><p>This computes the L2-norm of the global chidg_vector.
This performs a sum of the components squared on each processor and then executes
an <code class="docutils literal"><span class="pre">MPI_AllReduce</span></code> call that distributes the global sum to each processor. The square
root of this value is then computed locally on each processor to give the global
L2-norm of the chidg_vector across all processors.</p>
</dd></dl>

<dl class="function">
<dt id="dot">
<code class="descname">dot</code><span class="sig-paren">(</span><em>chidg_vector</em>, <em>chidg_vector</em><span class="sig-paren">)</span><a class="headerlink" href="#dot" title="Permalink to this definition">¶</a></dt>
<dd><p>This computes the vector-vector dot-product of two chidg_vector&#8217;s. The processor-local
dot-product is computed first. <code class="docutils literal"><span class="pre">MPI_AllReduce</span></code> is then called to reduce the results
across processors and distribute the result.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">chidg_vector%comm_send()</code></dt>
<dd><p>This performs a non-blocking send of the data in the <code class="docutils literal"><span class="pre">chidg_vector</span></code> to communicating
processors.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">chidg_vector%comm_recv()</code></dt>
<dd><p>This performs a blocking receive of the data coming in from communicating processors.</p>
</dd></dl>

<dl class="function">
<dt>
<code class="descname">chidg_vector%comm_wait()</code></dt>
<dd><p>This waits until all entries from <code class="docutils literal"><span class="pre">comm_send()</span></code> have been received by their targets
and indicates that the contents are safe to modify.</p>
</dd></dl>

</div>
</div>
<div class="section" id="parallel-efficiency">
<h2>Parallel efficiency<a class="headerlink" href="#parallel-efficiency" title="Permalink to this headline">¶</a></h2>
<p>There are two distinct areas of a solver algorithm that have different parallelization characteristics.
These are</p>
<blockquote>
<div><ul class="simple">
<li>Evaluating the spatial operators <span class="math">\(\quad\quad\quad\quad \frac{\partial R}{\partial Q}, R\)</span></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
</div>
<blockquote>
<div><ul class="simple">
<li>Solving a linear system of equations <span class="math">\(\quad\quad \frac{\partial R}{\partial Q} \Delta Q = -R\)</span></li>
</ul>
</div></blockquote>
<p>The parallel performance of these two steps are shown here</p>
<a class="reference internal image-reference" href="../../_images/scaling_spatial.png"><img alt="../../_images/scaling_spatial.png" class="align-left" src="../../_images/scaling_spatial.png" style="width: 45%;" /></a>
<a class="reference internal image-reference" href="../../_images/scaling_matrix.png"><img alt="../../_images/scaling_matrix.png" class="align-right" src="../../_images/scaling_matrix.png" style="width: 45%;" /></a>
</div>
<div class="section" id="parallel-preconditioning">
<h2>Parallel preconditioning<a class="headerlink" href="#parallel-preconditioning" title="Permalink to this headline">¶</a></h2>
<p>ChiDG uses iterative solvers to solve linear systems of equations. In particular, a flexible
version of the Generalized Minimum Residual(GMRES) algorithm is used. These Krylov-type
iterative solvers depend greatly on having a good preconditioner in order to obtain
reasonable convergence of the iterative linear solver.</p>
<div class="section" id="block-jacobi">
<h3>Block-Jacobi<a class="headerlink" href="#block-jacobi" title="Permalink to this headline">¶</a></h3>
<p>One approach to parallel preconditioning is for each processor to consider only it&#8217;s
local portion of the global matrix as the preconditioning matrix, solve that local
system, and apply the result as a preconditioner to a vector. This is a block-Jacobi
approach in a domain-decomposition sense. The preconditioning matrix could then be
solved using some general technique, for example Incomplete Lower-Upper(ILU) factorization.
This approach suffers when scaling to large numbers of processors, because the preconditioning
matrix on each local processor includes less and less information about the global problem.
In the limit as there is one element assigned per processor, the preconditioner becomes strictly
block-Jacobi, which performs poorly.</p>
</div>
<div class="section" id="restricted-additive-schwarz">
<h3>Restricted Additive Schwarz<a class="headerlink" href="#restricted-additive-schwarz" title="Permalink to this headline">¶</a></h3>
<p>Another approach to parallel preconditioning is to include some overlap data from the nearest
parallel elements coupled with the local elements. One of these approaches is the
Restricted Additive Schwarz(RAS) preconditioner. The portions of the neighboring elements
are included in the local preconditioner and that system is solved. The result is only
applied to the local vector, hence the term Restricted. The standard Additive Schwarz(AS)
algorithm distributes the result back to the neighboring processors.</p>
<p>ChiDG has both block-Jacobi and RAS-type preconditioners. The performance of these are
demonstrated here for moderate scaling. The RAS-type preconditioner, using an
Incomplete Lower-Upper factorization with zero fill in(ILU0) on the local problem
performs much better than the block-Jacobi preconditioner with and ILU0 local solve.</p>
<a class="reference internal image-reference" href="../../_images/scaling_preconditioner.png"><img alt="../../_images/scaling_preconditioner.png" class="align-center" src="../../_images/scaling_preconditioner.png" style="width: 50%;" /></a>
</div>
<div class="section" id="references">
<h3>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h3>
<p>[1] Boman, E. G., Karen, D. D., Rajamanickam, S., &#8220;Scalable Matrix Computations on Large Scale-Free Graphs Using 2D Graph Partitioning&#8221;, Proceddings of the International Conference on High Performance Computing, Networking, Storage and Analysis, 2013.</p>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../autodiff/detail_autodiff.html" class="btn btn-neutral float-right" title="Automatic Differentiation" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../containers/detail_containers.html" class="btn btn-neutral" title="ChiDG Matrix/Vector" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Nathan A. Wukie.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../../_static/mathjax_conf.js"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-80530851-1', 'auto');
    ga('set', 'location', 'http://nwukie.github.io/ChiDG_site/');
    ga('send', 'pageview');
</script>


</body>
</html>