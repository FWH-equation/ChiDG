

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting Started &mdash; ChiDG 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  

  
    <link rel="top" title="ChiDG 0.1 documentation" href="../index.html"/>
        <link rel="next" title="Examples" href="../examples/example_main.html"/>
        <link rel="prev" title="Welcome to ChiDG" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ChiDG
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#build-from-source">Build from source</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-get-chidg">Step 1: Get ChiDG</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-check-the-compilers">Step 2: Check the compilers</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-install-the-dependencies">Step 3: Install the dependencies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cmake">CMake</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hdf5">HDF5</a></li>
<li class="toctree-l4"><a class="reference internal" href="#metis">METIS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mpi">MPI</a></li>
<li class="toctree-l4"><a class="reference internal" href="#blas-and-lapack">BLAS and LAPACK</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#step-4-configure-the-build">Step 4: Configure the build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-5-build-chidg">Step 5: Build ChiDG</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-6-test-chidg">Step 6: Test ChiDG</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#chidg-executable-chidg">ChiDG Executable: <code class="docutils literal"><span class="pre">chidg</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-chidg">Running ChiDG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-1-create-a-chidg-formatted-grid-file">Step 1: Create a ChiDG-formatted grid file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-2-create-a-chidg-nml-input-file">Step 2: Create a <code class="docutils literal"><span class="pre">chidg.nml</span></code> input file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-3-run-chidg">Step 3: Run <code class="docutils literal"><span class="pre">chidg</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/example_main.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html">Smooth bump</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html#setup">Setup</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html#setup-from-scratch">Setup from scratch:</a></li>
<li class="toctree-l4"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html#use-setup-provided">Use setup provided:</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../examples/smoothbump/example_smoothbump.html#results">Results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../examples/naca2412/example_naca2412.html">NACA 2412 Airfoil</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../examples/naca2412/example_naca2412.html#background">Background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/naca2412/example_naca2412.html#set-up">Set-up</a></li>
<li class="toctree-l3"><a class="reference internal" href="../examples/naca2412/example_naca2412.html#results">Results</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../code_details/details_main.html">Code details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../code_details/architecture/detail_architecture.html">Finding your way around ChiDG</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/architecture/detail_architecture.html#source-layout-chidg-src">Source Layout <code class="docutils literal"><span class="pre">chidg/src</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/architecture/detail_architecture.html#chidg-modules">ChiDG Modules</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/architecture/detail_architecture.html#chidg-datatypes-type-datatype-f90">ChiDG Datatypes <code class="docutils literal"><span class="pre">type_datatype.f90</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/architecture/detail_architecture.html#chidg-topics-src-topic">ChiDG Topics <code class="docutils literal"><span class="pre">src/topic</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/chidg/detail_chidg.html">ChiDG Instance</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/chidg/detail_chidg.html#components">Components</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/chidg/detail_chidg.html#data">Data</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/mesh/detail_mesh.html">Mesh</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#elements">Elements</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#metric-terms">Metric terms</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#derivatives">Derivatives</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#faces">Faces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#face-metrics">Face metrics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#face-normals">Face normals</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#chimera-interfaces">Chimera Interfaces</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/mesh/detail_mesh.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/solvers/detail_solvers.html">Solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#time-integrators">Time Integrators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#chidg-representation">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#implicit-integrators">Implicit integrators</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#explicit-integrators">Explicit integrators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#nonlinear-solvers">Nonlinear solvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#id1">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#newton">Newton</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#quasi-newton">Quasi-Newton</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#linear-solvers">Linear Solvers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#id2">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#flexible-generalized-minimum-residual">Flexible Generalized Minimum Residual</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#preconditioners">Preconditioners</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#id4">ChiDG Representation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#block-jacobi">block-Jacobi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#block-ilu0">block-ILU0</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/solvers/detail_solvers.html#restricted-additive-schwarz-block-ilu0">Restricted Additive Schwarz + block-ILU0</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/equations/detail_equations.html">Equation Sets</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/equations/detail_equations.html#mathematical-background">Mathematical background</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/equations/detail_equations.html#chidg-operators">ChiDG Operators</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/equations/detail_equations.html#registering-new-operators">Registering new operators</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/equations/detail_equations.html#chidg-equation-sets">ChiDG Equation Sets</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/containers/detail_containers.html">ChiDG Matrix/Vector</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/containers/detail_containers.html#chidg-vector">ChiDG Vector</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/containers/detail_containers.html#block-vector">Block Vector</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/containers/detail_containers.html#dense-vector">Dense Vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/containers/detail_containers.html#chidg-matrix">ChiDG Matrix</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/containers/detail_containers.html#block-matrix">Block Matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/containers/detail_containers.html#dense-matrix">Dense Matrix</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/parallel/detail_parallel.html">Parallelization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#chidg-mpi">ChiDG MPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#domain-decomposition">Domain decomposition</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#parallel-matrix-vector-operations">Parallel matrix:vector operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#chidg-matrix">chidg_matrix</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#chidg-vector">chidg_vector</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#parallel-efficiency">Parallel efficiency</a></li>
<li class="toctree-l3"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#parallel-preconditioning">Parallel preconditioning</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#block-jacobi">Block-Jacobi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#restricted-additive-schwarz">Restricted Additive Schwarz</a></li>
<li class="toctree-l4"><a class="reference internal" href="../code_details/parallel/detail_parallel.html#references">References</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../code_details/autodiff/detail_autodiff.html">Automatic Differentiation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../code_details/autodiff/detail_autodiff.html#dnad-dual-number-automatic-differentiation">DNAD - Dual Number Automatic Differentiation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ChiDG</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Getting Started</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/getting_started/getting_started.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>We need to get a copy of ChiDG up and running on your machine. Let&#8217;s do it! The current option
we have to do this is to build ChiDG from source:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="#build-from-source"><span class="std std-ref">Build from source</span></a></li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
<div class="section" id="build-from-source">
<span id="id1"></span><h2>Build from source<a class="headerlink" href="#build-from-source" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-get-chidg">
<h3>Step 1: Get ChiDG<a class="headerlink" href="#step-1-get-chidg" title="Permalink to this headline">¶</a></h3>
<p>ChiDG is hosted on GitHub and may be cloned using the https protocol as</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">nwukie</span><span class="o">/</span><span class="n">ChiDG</span><span class="o">.</span><span class="n">git</span> <span class="n">ChiDG</span>
</pre></div>
</div>
</div>
<div class="section" id="step-2-check-the-compilers">
<h3>Step 2: Check the compilers<a class="headerlink" href="#step-2-check-the-compilers" title="Permalink to this headline">¶</a></h3>
<p>To build ChiDG, you will need a Fortran compiler that is relatively up-to-date. Here are some
requirements and recommendations regarding compilers:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The GNU Fortran compiler, <code class="docutils literal"><span class="pre">gfortran</span></code>, is recommended. <strong>Version &gt;= 5.0 is required</strong></li>
<li><strong>Do not</strong> use the Intel Fortran compiler, <code class="docutils literal"><span class="pre">ifort</span></code>. There are currently several bugs in all versions of the compiler that make it unusable. One bug in the compiler creates a bad memory leak in the compiled code. Intel has been notified and was able to reproduce the issue.</li>
<li>Other Fortran compilers have not been tested and are not supported.</li>
</ul>
</div>
</div>
<div class="section" id="step-3-install-the-dependencies">
<h3>Step 3: Install the dependencies<a class="headerlink" href="#step-3-install-the-dependencies" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Make sure</strong> the dependencies listed here are available on your machine or that you
build them and install them in an appropriate location.</p>
<p>When installing dependencies, please place them somewhere other than the ChiDG project directory.</p>
<blockquote class="last">
<div><ul class="simple">
<li><a class="reference internal" href="#cmake">CMake</a></li>
<li><a class="reference internal" href="#hdf5">HDF5</a></li>
<li><a class="reference internal" href="#metis">METIS</a></li>
<li><a class="reference internal" href="#mpi">MPI</a></li>
<li><a class="reference internal" href="#blas-and-lapack">BLAS and LAPACK</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="cmake">
<h4>CMake<a class="headerlink" href="#cmake" title="Permalink to this headline">¶</a></h4>
<p>ChiDG uses the CMake build-sytem to generate the <code class="docutils literal"><span class="pre">Makefile</span></code> configuration
files that are used when you run <code class="docutils literal"><span class="pre">make</span></code> to build the project. If you do not already have
CMake installed on your system, you should be able to download a package/binary from
the <a class="reference external" href="https://cmake.org">CMake Website</a>. You will run the <code class="docutils literal"><span class="pre">cmake</span></code> executable in
<a class="reference internal" href="#step-4-configure-the-build">Step 4: Configure the build</a>.</p>
</div>
<div class="section" id="hdf5">
<h4>HDF5<a class="headerlink" href="#hdf5" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<div class="last line-block">
<div class="line">Version: <code class="docutils literal"><span class="pre">&gt;=</span> <span class="pre">1.10</span></code></div>
<div class="line">Configure with: <code class="docutils literal"><span class="pre">--enable-fortran</span></code></div>
</div>
</div>
<p>HDF5 is used as a container for the ChiDG-formatted grid/solution files. The HDF5 library
gives the option to build various portions of the library itself, depending on what the
user needs available. ChiDG uses the HDF5 Fortran module interfaces and the high-level API.
HDF5 documentation and installation guide can be found on
<a class="reference external" href="https://support.hdfgroup.org/ftp/HDF5/current/src/unpacked/release_docs/INSTALL">HDF5 Website</a>.
Be sure to configure with the appropriate flags when building HDF5. You likely need to add the
following flags to the configuration:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">configure</span> <span class="o">--</span><span class="n">enable</span><span class="o">-</span><span class="n">fortran</span>
</pre></div>
</div>
<p>The ChiDG CMake build will try to automatically locate the HDF5 libraries and
modules. If the HDF5 libraries were installed in a non-standard location, you can
help CMake find them by <strong>setting an environment variable</strong>, <code class="docutils literal"><span class="pre">HDF5_ROOT</span></code>, such that
the directory includes the <code class="docutils literal"><span class="pre">bin</span></code>, <code class="docutils literal"><span class="pre">lib</span></code>, and <code class="docutils literal"><span class="pre">include</span></code>
directories where the libraries and modules can be located.</p>
<p>So, if you installed HDF5 in the directory <code class="docutils literal"><span class="pre">/home/sparky/hdf5</span></code>, you might place
the line
<code class="docutils literal"><span class="pre">export</span> <span class="pre">HDF5_ROOT=/home/sparky/hdf5</span></code>
in your <code class="docutils literal"><span class="pre">.bashrc</span></code> or <code class="docutils literal"><span class="pre">.bash_profile</span></code> files if you are using the Bash shell.</p>
</div>
<div class="section" id="metis">
<h4>METIS<a class="headerlink" href="#metis" title="Permalink to this headline">¶</a></h4>
<p>METIS is a partitioning library that is used to facilitate domain decomposition
for ChiDG and can be obtained from the
<a class="reference external" href="http://glaros.dtc.umn.edu/gkhome/metis/metis/overview">METIS Website</a>.</p>
<p>If METIS is installed in a non-standard location and CMake can&#8217;t find it,
you can help CMake find it by <strong>setting an environment variable</strong>: <code class="docutils literal"><span class="pre">METIS_ROOT</span></code>.</p>
<p>So, if you installed METIS in the directory <code class="docutils literal"><span class="pre">/home/sparky/metis</span></code>, you might place
the line
<code class="docutils literal"><span class="pre">export</span> <span class="pre">METIS_ROOT=/home/sparky/metis</span></code>
in your <code class="docutils literal"><span class="pre">.bashrc</span></code> or <code class="docutils literal"><span class="pre">.bash_profile</span></code> files if you are using the Bash shell.</p>
</div>
<div class="section" id="mpi">
<h4>MPI<a class="headerlink" href="#mpi" title="Permalink to this headline">¶</a></h4>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>ChiDG uses the MPI Fortran 2008 module interfaces. Check that the MPI implementation
being used supports and is configured to build these interfaces. OpenMPI v2.0.1 tries
to build these by default.</p>
<dl class="last docutils">
<dt>Also:</dt>
<dd><ul class="first last simple">
<li>MPI should be built with the same compiler that is being used to build ChiDG.</li>
<li>Once MPI is built, it is recommended to use the MPI Fortran compiler wrapper
<code class="docutils literal"><span class="pre">mpifort</span></code> as the compiler for ChiDG in <a class="reference internal" href="#step-4-configure-the-build">Step 4: Configure the build</a></li>
</ul>
</dd>
<dt>Tested:</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="https://www.open-mpi.org">OpenMPI</a>, Version 2.0.1.</li>
<li>Intel MPI  :  Found bugs in Intel implementation. Do not use.</li>
</ul>
</dd>
</dl>
</div>
<p>MPI is used to facilitate the parallel communication in ChiDG. If your MPI installation is
in a non-standard location, CMake will not be able to find it and it will tell you so.
You may also want to force CMake to use a particular MPI installation if you have multiple
installations on your machine. Either way, you can direct CMake find your MPI library
by <strong>setting the environment variable</strong>: <code class="docutils literal"><span class="pre">MPI_Fortran_COMPILER</span></code>.</p>
<p>So, if your MPI installation is located in the directory <code class="docutils literal"><span class="pre">/home/sparky/mpi</span></code>, you might
place the line
<code class="docutils literal"><span class="pre">export</span> <span class="pre">MPI_Fortran_COMPILER=/home/sparky/my_mpi_install/bin/mpif90</span></code>
in your <code class="docutils literal"><span class="pre">.bashrc</span></code> or <code class="docutils literal"><span class="pre">.bash_profile</span></code> files if you are using the Bash shell.</p>
</div>
<div class="section" id="blas-and-lapack">
<h4>BLAS and LAPACK<a class="headerlink" href="#blas-and-lapack" title="Permalink to this headline">¶</a></h4>
<p>BLAS and LAPACK are libraries that contain routines for standard linear algebra operations
and algorithms. There are also many implementations of the BLAS and LAPACK libraries
by different vendors. Often times, a particular installation will have been optimized
for running on a given machine. Some common implementations of BLAS and LAPACK are the
Intel MKL, ATLAS, and the Apple Accelerate Framework.</p>
<p>If you do not have the BLAS and LAPACK libraries installed on your machine, reference
implementations can be downloaded at:</p>
<div class="line-block">
<div class="line"><a class="reference external" href="http://www.netlib.org/blas">Reference BLAS implementation</a></div>
<div class="line"><a class="reference external" href="http://www.netlib.org/lapack">Reference LAPACK implementation</a></div>
<div class="line"><br /></div>
</div>
<p>These will give the correct answers and can be used to get things up and running,
however they are not optimized and so will degrade performance for ChiDG.</p>
<p>If your BLAS/LAPACK installations are in a non-standard location, CMake will not be able
to find it and it will tell you so. You can help CMake find them by <strong>appending the location
of the libraries to the Linker path</strong>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<dl class="last docutils">
<dt>On machines running LINUX:</dt>
<dd><ul class="first last simple">
<li>export LD_LIBRARY_PATH=/my/path/to/blas:$LD_LIBRARY_PATH</li>
<li>export LD_LIBRARY_PATH=/my/path/to/lapack:$LD_LIBRARY_PATH</li>
</ul>
</dd>
<dt>On machines running Apple&#8217;s OS X or macOS operating system:</dt>
<dd><ul class="first last simple">
<li>export DYLD_LIBRARY_PATH=/my/path/to/blas:$DYLD_LIBARARY_PATH</li>
<li>export DYLD_LIBRARY_PATH=/my/path/to/lapack:$DYLD_LIBARARY_PATH</li>
</ul>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="step-4-configure-the-build">
<h3>Step 4: Configure the build<a class="headerlink" href="#step-4-configure-the-build" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>We should probably double-check a few things...</p>
<ul class="last simple">
<li><strong>Check</strong> that all environment variables that were set for the dependencies are initialized in your environment.
You may consider opening a new shell or running <code class="docutils literal"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code> or <code class="docutils literal"><span class="pre">source</span> <span class="pre">~/.bash_profile</span></code>.</li>
</ul>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2"><strong>Configure steps</strong></td>
</tr>
<tr class="row-even"><td><strong>#1</strong> Change to the ChiDG root directory</td>
<td><code class="docutils literal"><span class="pre">cd</span> <span class="pre">ChiDG</span></code></td>
</tr>
<tr class="row-odd"><td><strong>#2</strong> Create a new build directory</td>
<td><code class="docutils literal"><span class="pre">mkdir</span> <span class="pre">build</span></code></td>
</tr>
<tr class="row-even"><td><strong>#3</strong> Change to the build directory</td>
<td><code class="docutils literal"><span class="pre">cd</span> <span class="pre">build</span></code></td>
</tr>
<tr class="row-odd"><td><strong>#4</strong> Configure with CMake + user options</td>
<td><code class="docutils literal"><span class="pre">cmake</span> <span class="pre">..</span></code>  or <code class="docutils literal"><span class="pre">cmake</span> <span class="pre">-DCMAKE_Fortran_COMPILER=mpifort</span> <span class="pre">..</span></code></td>
</tr>
</tbody>
</table>
<p>Regarding configure stage <strong>#4</strong>, configuration options can be passed when invoking <code class="docutils literal"><span class="pre">cmake</span></code> in order to influence the build
process. They are passed with the <code class="docutils literal"><span class="pre">-D</span></code> flag as:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DParameter</span><span class="o">=</span><span class="n">Option</span> <span class="o">..</span>
</pre></div>
</div>
<p>A typical build configure looks like:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_Fortran_COMPILER</span><span class="o">=</span><span class="n">mpifort</span> <span class="o">..</span>
</pre></div>
</div>
<p>A developer might configure the build using the following option:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">cmake</span> <span class="o">-</span><span class="n">DCMAKE_Fortran_COMPILER</span><span class="o">=</span><span class="n">mpifort</span> <span class="o">-</span><span class="n">DCMAKE_BUILD_TYPE</span><span class="o">=</span><span class="n">Debug</span> <span class="o">..</span>
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="50%" />
<col width="22%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Parameter</td>
<td>Description</td>
<td>Options</td>
</tr>
<tr class="row-even"><td>CMAKE_Fortran_COMPILER</td>
<td>Specify a Fortran Compiler</td>
<td><code class="docutils literal"><span class="pre">mpifort</span></code></td>
</tr>
<tr class="row-odd"><td>CMAKE_BUILD_TYPE</td>
<td>Specify what type of compiler settings to build with</td>
<td><code class="docutils literal"><span class="pre">Release</span></code>
<code class="docutils literal"><span class="pre">Debug</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-5-build-chidg">
<h3>Step 5: Build ChiDG<a class="headerlink" href="#step-5-build-chidg" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2"><strong>Build steps</strong></td>
</tr>
<tr class="row-even"><td>Run <code class="docutils literal"><span class="pre">make</span></code> to build the ChiDG library</td>
<td><code class="docutils literal"><span class="pre">make</span></code> or <code class="docutils literal"><span class="pre">make</span> <span class="pre">-j</span> <span class="pre">4</span></code></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="step-6-test-chidg">
<h3>Step 6: Test ChiDG<a class="headerlink" href="#step-6-test-chidg" title="Permalink to this headline">¶</a></h3>
<p>ChiDG uses <a class="reference external" href="http://pfunit.sourceforge.net">pFUnit</a> to support unit and integration
testing of the compiled ChiDG library.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Requires web access to retrieve pFUnit source.</p>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td colspan="2"><strong>Testing steps</strong></td>
</tr>
<tr class="row-even"><td><dl class="first last docutils">
<dt>Run <code class="docutils literal"><span class="pre">make</span> <span class="pre">check</span></code> to:</dt>
<dd><ul class="first last simple">
<li>download/build pFUnit</li>
<li>build ChiDG tests</li>
</ul>
</dd>
</dl>
</td>
<td><code class="docutils literal"><span class="pre">make</span> <span class="pre">check</span></code> or <code class="docutils literal"><span class="pre">make</span> <span class="pre">check</span> <span class="pre">-j</span> <span class="pre">4</span></code></td>
</tr>
<tr class="row-odd"><td><dl class="first last docutils">
<dt>Run <code class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></code> to:</dt>
<dd><ul class="first last simple">
<li>run tests on ChiDG</li>
</ul>
</dd>
</dl>
</td>
<td><code class="docutils literal"><span class="pre">make</span> <span class="pre">test</span></code></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="usage">
<span id="id2"></span><h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>So, how does one actually use ChiDG? The interface for using the ChiDG library
is still being designed and changed. One thing to keep in mind, is that
the interface provided is just an interface. One could create their own driver
interface by linking to the library and compiling an executable. For now, we
will just focus on detailing how ChiDG currently gets used.</p>
<div class="section" id="chidg-executable-chidg">
<h3>ChiDG Executable: <code class="docutils literal"><span class="pre">chidg</span></code><a class="headerlink" href="#chidg-executable-chidg" title="Permalink to this headline">¶</a></h3>
<p>When you build and install ChiDG, it builds an executable file. This is simply
a driver file(<code class="docutils literal"><span class="pre">src/interfaces/driver.f90</span></code>) that uses routines from the ChiDG library.
The driver file gets compiled, linked to the ChiDG library, and put in an executable, <code class="docutils literal"><span class="pre">chidg</span></code>.
The ChiDG executable, <code class="docutils literal"><span class="pre">chidg</span></code>, works as:</p>
<blockquote>
<div><ul class="simple">
<li>a utility for converting Plot3D grid files</li>
<li>a utility for editing boundary conditions in the ChiDG-format HDF file</li>
<li>a utility for processing a solution for viewing in Tecplot or Paraview</li>
<li>a driver to run ChiDG simulations</li>
</ul>
</div></blockquote>
<dl class="attribute">
<dt>
<code class="descname">chidg convert file.x</code></dt>
<dd><ul class="simple">
<li>Convert a Plot3D grid file(example in this case: &#8216;file.x&#8217;) to a ChiDG-formatted HDF5 file.</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">chidg edit file.h5</code></dt>
<dd><ul class="simple">
<li>Edit a ChiDG-formatted HDF5 grid file(example in this case: &#8216;file.h5&#8217;).</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">chidg post file.h5</code></dt>
<dd><ul class="simple">
<li>Post-process a ChiDG-formatted HDF5 grid/solution file.</li>
<li>Creates Tecplot/Paraview files for visualization</li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="chidg">
<code class="descname">chidg</code><a class="headerlink" href="#chidg" title="Permalink to this definition">¶</a></dt>
<dd><ul class="simple">
<li>Run a ChiDG simulation</li>
<li>Assumes chidg.nml namelist and grid files are present in the working directory</li>
</ul>
</dd></dl>

<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="running-chidg">
<span id="id3"></span><h2>Running ChiDG<a class="headerlink" href="#running-chidg" title="Permalink to this headline">¶</a></h2>
<div class="section" id="step-1-create-a-chidg-formatted-grid-file">
<h3>Step 1: Create a ChiDG-formatted grid file<a class="headerlink" href="#step-1-create-a-chidg-formatted-grid-file" title="Permalink to this headline">¶</a></h3>
<p>To create a ChiDG-formatted grid, generate your grid as a <strong>multi-block,
unformatted, double-precision Plot3D file</strong>. As an example, we will just
assume you called this file, <code class="docutils literal"><span class="pre">awesome_grid.x</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li>Run <code class="docutils literal"><span class="pre">chidg</span> <span class="pre">convert</span> <span class="pre">awesome_grid.x</span></code> to create a ChiDG-formatted grid, <code class="docutils literal"><span class="pre">awesome_grid.h5</span></code>.</li>
<li>Run <code class="docutils literal"><span class="pre">chidg</span> <span class="pre">edit</span> <span class="pre">awesome_grid.h5</span></code> and edit the boundary conditions for your grid.</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="step-2-create-a-chidg-nml-input-file">
<h3>Step 2: Create a <code class="docutils literal"><span class="pre">chidg.nml</span></code> input file<a class="headerlink" href="#step-2-create-a-chidg-nml-input-file" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><ul>
<li><p class="first">Download a default <a class="reference download internal" href="../_downloads/chidg.nml" download=""><code class="xref download docutils literal"><span class="pre">chidg.nml</span></code></a> and place it in the
directory in which you plan to run <code class="docutils literal"><span class="pre">chidg</span></code>.</p>
</li>
<li><p class="first">Edit the <code class="docutils literal"><span class="pre">chidg.nml</span></code> entries as:</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><div class="first last line-block">
<div class="line"><code class="docutils literal"><span class="pre">gridfile</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span class="pre">=</span> <span class="pre">'awesome_grid.h5'</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">solutionfile_in</span>&nbsp; <span class="pre">=</span> <span class="pre">'none'</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">solutionfile_out</span> <span class="pre">=</span> <span class="pre">'awesome_grid.h5'</span></code></div>
</div>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
</li>
</ul>
</div></blockquote>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="step-3-run-chidg">
<h3>Step 3: Run <code class="docutils literal"><span class="pre">chidg</span></code><a class="headerlink" href="#step-3-run-chidg" title="Permalink to this headline">¶</a></h3>
<p>In the working directory, call the <code class="docutils literal"><span class="pre">chidg</span></code> executable:</p>
<dl class="attribute">
<dt>
<code class="descname">Serial calculation</code></dt>
<dd><p><code class="docutils literal"><span class="pre">chidg</span></code></p>
</dd></dl>

<dl class="attribute">
<dt>
<code class="descname">Parallel calculation</code></dt>
<dd><p><code class="docutils literal"><span class="pre">mpirun</span> <span class="pre">-np</span> <span class="pre">3</span> <span class="pre">chidg</span></code></p>
</dd></dl>

<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Once you get the hang of how the process works, you may consider playing around
with the other entries in <code class="docutils literal"><span class="pre">chidg.nml</span></code> to understand how they affect the behavior
and performance of the ChiDG</p>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examples/example_main.html" class="btn btn-neutral float-right" title="Examples" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral" title="Welcome to ChiDG" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Nathan A. Wukie.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script type="text/javascript" src="../_static/mathjax_conf.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-80530851-1', 'auto');
    ga('set', 'location', 'http://nwukie.github.io/ChiDG_site/');
    ga('send', 'pageview');
</script>


</body>
</html>